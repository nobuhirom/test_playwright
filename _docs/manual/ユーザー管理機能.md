# ユーザー管理機能

## 概要
ユーザー管理機能は、システム管理者がユーザーアカウントを作成、編集、無効化する機能を提供します。また、ユーザーへの役割（ロール）の割り当てや権限の管理も行います。適切なアクセス制御とセキュリティ管理を実現するための重要な機能です。

**URL**: http://localhost:3000/users

## 主要機能

### ユーザー一覧
- 登録済みユーザーの一覧表示
- 名前、メールアドレス、役割、ステータスの表示
- 検索機能（名前、メールアドレス）
- ソート機能（名前、登録日、最終ログイン日）
- フィルター機能（役割、ステータス）

### ユーザー作成
- 新規ユーザーアカウントの作成
- 基本情報の入力（名前、メールアドレス）
- 初期パスワードの設定
- 役割と権限の設定

### ユーザー編集
- ユーザー情報の更新
- 役割の変更
- パスワードのリセット
- アカウントの有効化/無効化

### 権限管理
- ユーザーへのシステム権限の割り当て
- 役割ベースのアクセス制御
- カスタム権限の設定（将来実装予定）

## データモデル

### ユーザー情報
- ID: 自動生成（ユニーク）
- 名前: 文字列（必須）
- メールアドレス: 文字列（ユニーク、必須）
- パスワード: 文字列（ハッシュ化）
- 役割: 列挙型（'USER', 'ADMIN'）
- ステータス: 列挙型（'ACTIVE', 'INACTIVE', 'LOCKED'）
- 最終ログイン日時: 日付
- 作成日時: 日付（自動設定）
- 更新日時: 日付（自動更新）

### 役割（ロール）情報
- USER: 一般ユーザー権限
- ADMIN: 管理者権限（すべての機能へのアクセス）

## 画面説明

### ユーザー一覧画面
- 上部に検索・フィルター機能を配置
- ユーザーをテーブル形式で表示
- 各ユーザー行に編集・詳細表示ボタン
- 「新規ユーザー作成」ボタン
- ページネーション機能

### ユーザー作成/編集画面
- フォーム形式でユーザー情報を入力
- 必須項目（名前、メールアドレス）のバリデーション
- 役割選択ドロップダウン
- パスワード設定/リセットセクション
- 「保存」「キャンセル」ボタン

### ユーザー詳細画面
- ユーザーの基本情報表示
- 活動履歴表示（最終ログイン、作成したプロジェクト/タスク）
- 権限情報の表示
- 編集・無効化ボタン

## 操作方法

### 新規ユーザー作成
1. ユーザー一覧画面の「新規ユーザー作成」ボタンをクリック
2. 必須情報（名前、メールアドレス、パスワード）を入力
3. 役割を選択
4. 「保存」ボタンをクリック

### ユーザー情報編集
1. ユーザー一覧から編集したいユーザーの「編集」ボタンをクリック
2. 情報を更新
3. 「保存」ボタンをクリック

### ユーザーの無効化
1. ユーザー詳細画面または編集画面で「無効化」ボタンをクリック
2. 確認ダイアログで「OK」をクリック

### パスワードリセット
1. ユーザー編集画面で「パスワードリセット」セクションを展開
2. 新しいパスワードを入力
3. 「パスワードを更新」ボタンをクリック

## アクセス権限

### 管理者（ADMIN）
- すべてのユーザー管理機能にアクセス可能
- ユーザーの作成、編集、無効化が可能
- 役割の変更が可能

### 一般ユーザー（USER）
- 自分自身のプロフィール情報の閲覧・編集のみ可能
- パスワード変更が可能
- 他のユーザー情報へのアクセス不可

## 技術仕様

- React + Next.js によるSPA実装
- MongoDB でのユーザーデータ管理
- bcrypt によるパスワードハッシュ化
- JWT によるユーザー認証
- react-hook-form によるフォーム管理
- zod によるバリデーション
- RESTful API によるデータアクセス

## セキュリティ対策

- パスワードは常にハッシュ化して保存
- 管理者アカウントのアクションは監査ログに記録
- アカウントロック機能（連続ログイン失敗時）
- ユーザー作成・編集操作は管理者のみに制限
- セキュリティリスクのあるユーザー情報は表示を制限 